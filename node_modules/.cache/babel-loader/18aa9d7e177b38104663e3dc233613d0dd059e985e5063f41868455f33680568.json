{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/personal-delivery-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{addFamilyMember}from'../services/firestoreService';// Corrected import\nimport{useAuth}from'../contexts/AuthContext';// Added for user context\nimport'../styles/Modal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AddFamilyMemberModal(_ref){let{isOpen,onClose,onFamilyMemberAdded}=_ref;const{user}=useAuth();// Get user from context\nconst[formData,setFormData]=useState({displayName:'',phoneNumber:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[success,setSuccess]=useState('');const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');setSuccess('');if(!user){setError('User not authenticated.');setLoading(false);return;}// Validation\nif(!formData.displayName||!formData.phoneNumber){setError('שם מלא ומספר טלפון חובה');setLoading(false);return;}try{const result=await addFamilyMember(user.uid,{displayName:formData.displayName,phoneNumber:formData.phoneNumber});if(result.success){setSuccess('בן משפחה נוסף בהצלחה!');setFormData({displayName:'',phoneNumber:''});onFamilyMemberAdded();setTimeout(onClose,2000);}else{setError(result.error);}}catch(err){setError('שגיאה בהוספת בן משפחה: '+err.message);}setLoading(false);};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u05D4\\u05D5\\u05E1\\u05E3 \\u05D1\\u05DF \\u05DE\\u05E9\\u05E4\\u05D7\\u05D4\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close-button\",onClick:onClose,children:\"\\xD7\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-error\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:success}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"displayName\",children:\"\\u05E9\\u05DD \\u05DE\\u05DC\\u05D0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"displayName\",name:\"displayName\",value:formData.displayName,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phoneNumber\",children:\"\\u05DE\\u05E1\\u05E4\\u05E8 \\u05D8\\u05DC\\u05E4\\u05D5\\u05DF\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phoneNumber\",name:\"phoneNumber\",value:formData.phoneNumber,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button button-primary\",disabled:loading,children:loading?'מוסיף...':'הוסף בן משפחה'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button button-secondary\",onClick:onClose,children:\"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"})]})]})});}export default AddFamilyMemberModal;","map":{"version":3,"names":["React","useState","addFamilyMember","useAuth","jsx","_jsx","jsxs","_jsxs","AddFamilyMemberModal","_ref","isOpen","onClose","onFamilyMemberAdded","user","formData","setFormData","displayName","phoneNumber","error","setError","loading","setLoading","success","setSuccess","handleChange","e","name","value","target","prev","_objectSpread","handleSubmit","preventDefault","result","uid","setTimeout","err","message","className","children","onClick","onSubmit","htmlFor","type","id","onChange","required","disabled"],"sources":["/home/ubuntu/personal-delivery-app/src/components/AddFamilyMemberModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { addFamilyMember } from '../services/firestoreService'; // Corrected import\nimport { useAuth } from '../contexts/AuthContext'; // Added for user context\nimport '../styles/Modal.css';\n\nfunction AddFamilyMemberModal({ isOpen, onClose, onFamilyMemberAdded }) {\n  const { user } = useAuth(); // Get user from context\n  const [formData, setFormData] = useState({\n    displayName: '',\n    phoneNumber: '',\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState('');\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    if (!user) {\n      setError('User not authenticated.');\n      setLoading(false);\n      return;\n    }\n\n    // Validation\n    if (!formData.displayName || !formData.phoneNumber) {\n      setError('שם מלא ומספר טלפון חובה');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const result = await addFamilyMember(user.uid, { displayName: formData.displayName, phoneNumber: formData.phoneNumber });\n      if (result.success) {\n        setSuccess('בן משפחה נוסף בהצלחה!');\n        setFormData({\n          displayName: '',\n          phoneNumber: '',\n        });\n        onFamilyMemberAdded();\n        setTimeout(onClose, 2000);\n      } else {\n        setError(result.error);\n      }\n    } catch (err) {\n      setError('שגיאה בהוספת בן משפחה: ' + err.message);\n    }\n\n    setLoading(false);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal-content\">\n        <h2>הוסף בן משפחה</h2>\n        <button className=\"modal-close-button\" onClick={onClose}>&times;</button>\n\n        {error && <div className=\"alert alert-error\">{error}</div>}\n        {success && <div className=\"alert alert-success\">{success}</div>}\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"displayName\">שם מלא</label>\n            <input\n              type=\"text\"\n              id=\"displayName\"\n              name=\"displayName\"\n              value={formData.displayName}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"phoneNumber\">מספר טלפון</label>\n            <input\n              type=\"tel\"\n              id=\"phoneNumber\"\n              name=\"phoneNumber\"\n              value={formData.phoneNumber}\n              onChange={handleChange}\n              required\n            />\n          </div>\n\n          <button type=\"submit\" className=\"button button-primary\" disabled={loading}>\n            {loading ? 'מוסיף...' : 'הוסף בן משפחה'}\n          </button>\n          <button type=\"button\" className=\"button button-secondary\" onClick={onClose}>ביטול</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default AddFamilyMemberModal;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}