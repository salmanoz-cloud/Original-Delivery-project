{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/personal-delivery-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{addFamilyMember}from'../services/firestoreService';// Corrected import\nimport{useAuth}from'../contexts/AuthContext';// Added for user context\nimport'../styles/Modal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AddFamilyMemberModal(_ref){let{isOpen,onClose,onFamilyMemberAdded}=_ref;const{user}=useAuth();// Get user from context\nconst[formData,setFormData]=useState({displayName:'',email:'',phoneNumber:'',password:'',confirmPassword:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[success,setSuccess]=useState('');const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');setSuccess('');if(!user){setError('User not authenticated.');setLoading(false);return;}// Validation\nif(!formData.displayName||!formData.email||!formData.phoneNumber||!formData.password){setError('כל השדות חובה');setLoading(false);return;}if(formData.password!==formData.confirmPassword){setError('הסיסמאות לא תואמות');setLoading(false);return;}if(formData.password.length<6){setError('הסיסמה חייבת להיות לפחות 6 תווים');setLoading(false);return;}try{const result=await addFamilyMember(user.uid,formData);// Pass user.uid as primaryUserId\nif(result.success){setSuccess('בן משפחה נוסף בהצלחה!');setFormData({displayName:'',email:'',phoneNumber:'',password:'',confirmPassword:''});onFamilyMemberAdded();setTimeout(onClose,2000);}else{setError(result.error);}}catch(err){setError('שגיאה בהוספת בן משפחה: '+err.message);}setLoading(false);};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u05D4\\u05D5\\u05E1\\u05E3 \\u05D1\\u05DF \\u05DE\\u05E9\\u05E4\\u05D7\\u05D4\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close-button\",onClick:onClose,children:\"\\xD7\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-error\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:success}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"displayName\",children:\"\\u05E9\\u05DD \\u05DE\\u05DC\\u05D0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"displayName\",name:\"displayName\",value:formData.displayName,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\u05D0\\u05D9\\u05DE\\u05D9\\u05D9\\u05DC\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phoneNumber\",children:\"\\u05DE\\u05E1\\u05E4\\u05E8 \\u05D8\\u05DC\\u05E4\\u05D5\\u05DF\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phoneNumber\",name:\"phoneNumber\",value:formData.phoneNumber,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"\\u05D0\\u05D9\\u05E9\\u05D5\\u05E8 \\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button button-primary\",disabled:loading,children:loading?'מוסיף...':'הוסף בן משפחה'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button button-secondary\",onClick:onClose,children:\"\\u05D1\\u05D9\\u05D8\\u05D5\\u05DC\"})]})]})});}export default AddFamilyMemberModal;","map":{"version":3,"names":["React","useState","addFamilyMember","useAuth","jsx","_jsx","jsxs","_jsxs","AddFamilyMemberModal","_ref","isOpen","onClose","onFamilyMemberAdded","user","formData","setFormData","displayName","email","phoneNumber","password","confirmPassword","error","setError","loading","setLoading","success","setSuccess","handleChange","e","name","value","target","prev","_objectSpread","handleSubmit","preventDefault","length","result","uid","setTimeout","err","message","className","children","onClick","onSubmit","htmlFor","type","id","onChange","required","disabled"],"sources":["/home/ubuntu/personal-delivery-app/src/components/AddFamilyMemberModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { addFamilyMember } from '../services/firestoreService'; // Corrected import\nimport { useAuth } from '../contexts/AuthContext'; // Added for user context\nimport '../styles/Modal.css';\n\nfunction AddFamilyMemberModal({ isOpen, onClose, onFamilyMemberAdded }) {\n  const { user } = useAuth(); // Get user from context\n  const [formData, setFormData] = useState({\n    displayName: '',\n    email: '',\n    phoneNumber: '',\n    password: '',\n    confirmPassword: '',\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState('');\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    if (!user) {\n      setError('User not authenticated.');\n      setLoading(false);\n      return;\n    }\n\n    // Validation\n    if (!formData.displayName || !formData.email || !formData.phoneNumber || !formData.password) {\n      setError('כל השדות חובה');\n      setLoading(false);\n      return;\n    }\n\n    if (formData.password !== formData.confirmPassword) {\n      setError('הסיסמאות לא תואמות');\n      setLoading(false);\n      return;\n    }\n\n    if (formData.password.length < 6) {\n      setError('הסיסמה חייבת להיות לפחות 6 תווים');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const result = await addFamilyMember(user.uid, formData); // Pass user.uid as primaryUserId\n      if (result.success) {\n        setSuccess('בן משפחה נוסף בהצלחה!');\n        setFormData({\n          displayName: '',\n          email: '',\n          phoneNumber: '',\n          password: '',\n          confirmPassword: '',\n        });\n        onFamilyMemberAdded();\n        setTimeout(onClose, 2000);\n      } else {\n        setError(result.error);\n      }\n    } catch (err) {\n      setError('שגיאה בהוספת בן משפחה: ' + err.message);\n    }\n\n    setLoading(false);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal-content\">\n        <h2>הוסף בן משפחה</h2>\n        <button className=\"modal-close-button\" onClick={onClose}>&times;</button>\n\n        {error && <div className=\"alert alert-error\">{error}</div>}\n        {success && <div className=\"alert alert-success\">{success}</div>}\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"displayName\">שם מלא</label>\n            <input\n              type=\"text\"\n              id=\"displayName\"\n              name=\"displayName\"\n              value={formData.displayName}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"email\">אימייל</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"phoneNumber\">מספר טלפון</label>\n            <input\n              type=\"tel\"\n              id=\"phoneNumber\"\n              name=\"phoneNumber\"\n              value={formData.phoneNumber}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">סיסמה</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"confirmPassword\">אישור סיסמה</label>\n            <input\n              type=\"password\"\n              id=\"confirmPassword\"\n              name=\"confirmPassword\"\n              value={formData.confirmPassword}\n              onChange={handleChange}\n              required\n            />\n          </div>\n\n          <button type=\"submit\" className=\"button button-primary\" disabled={loading}>\n            {loading ? 'מוסיף...' : 'הוסף בן משפחה'}\n          </button>\n          <button type=\"button\" className=\"button button-secondary\" onClick={onClose}>ביטול</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default AddFamilyMemberModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}